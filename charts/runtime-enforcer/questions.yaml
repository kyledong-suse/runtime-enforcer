# This is a Rancher questions file
---
questions:
  ###############################################################################
  # Operator
  ###############################################################################
  - variable: operator.manager.image.pullPolicy
    type: enum
    options:
      - Always
      - IfNotPresent
      - Never
    default: IfNotPresent
    label: Operator Image Pull Policy
    description: |
      Pull policy of the Operator Deployment
    group: Operator

  - variable: operator.replicas
    type: int
    default: 1
    min: 1
    label: Operator Replicas
    description: |
      Number of replicas of the Operator Deployment
    group: Operator

###############################################################################
  # Agent
  ###############################################################################
  - variable: agent.agent.image.pullPolicy
    type: enum
    options:
      - Always
      - IfNotPresent
      - Never
    default: IfNotPresent
    label: Agent Image Pull Policy
    description: |
      Pull policy of Agent DaemonSet
    group: Agent

  ###############################################################################
  # Learning
  ###############################################################################
  - variable: learning.enabled
    type: boolean
    default: true
    label: Enable Cluster-wide Learning Mode
    description: |
      Enable cluster-wide learning mode. If disabled, no process learning occurs.
      Process enforcer remains unaffected.
    group: Learning

  ###############################################################################
  # OpenTelemetry
  ###############################################################################
  - variable: telemetry.mode
    type: string
    default: custom
    required: true
    label: Telemetry mode
    description: |
      Custom mode will allow you to configure the OpenTelemetry Collector by your own and runtime enforcer will send data to it.
    group: OpenTelemetry

  - variable: telemetry.metrics
    type: boolean
    default: false
    required: true
    label: Enable Metrics
    description: |
      Enable metrics collection for all components installed by runtime enforcer.
      Important: Requires OpenTelemetry CRDs available.
    group: OpenTelemetry

  - variable: telemetry.tracing
    type: boolean
    default: false
    required: true
    label: Enable Tracing
    description: |
      Enable tracing collection for all components installed by runtime enforcer.
      Important: Requires OpenTelemetry CRDs available.
    group: OpenTelemetry

  - variable: telemetry.custom.endpoint
    type: string
    default: ""
    label: OpenTelemetry endpoint
    description: |
      Endpoint of the OpenTelemetry collector.
    group: OpenTelemetry
    show_if: telemetry.mode=custom

  - variable: telemetry.custom.insecure
    type: boolean
    default: false
    label: Insecure communication
    description: |
      Disable TLS verification for the OpenTelemetry collector.
    group: OpenTelemetry
    show_if: telemetry.mode=custom

  - variable: telemetry.custom.otelCollectorCertificateSecret
    type: string
    default: ""
    label: Certificate secret
    description: |
      Secret containing the certificate for the OpenTelemetry collector.
      The secret should contain the key `ca.crt`.
    group: OpenTelemetry
    show_if: telemetry.mode=custom && telemetry.custom.insecure=false

  - variable: telemetry.custom.otelCollectorClientCertificateSecret
    type: string
    default: ""
    label: Client certificate secret
    description: |
      Secret containing the client certificate for the OpenTelemetry collector (mTLS).
      The secret should contain the keys `tls.crt` and `tls.key`.
    group: OpenTelemetry
    show_if: telemetry.mode=custom && telemetry.custom.insecure=false